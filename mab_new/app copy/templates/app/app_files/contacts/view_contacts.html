
<style>
.contact_name:hover{
color: white!important;
}

/* loader */
.loader {
  border: 16px solid #f3f3f3;
  border-radius: 50%;
  border-top: 16px solid #3498db;
  width: 120px;
  height: 120px;
  -webkit-animation: spin 2s linear infinite; /* Safari */
  animation: spin 2s linear infinite;
  margin-left: 42%;
}

/* Safari */
@-webkit-keyframes spin {
  0% { -webkit-transform: rotate(0deg); }
  100% { -webkit-transform: rotate(360deg); }
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}
.icons{
    cursor: default;
}
.icons:hover{
color: white!important;
}

/* draggable targets */
[data-draggable="target"]
{
    float:left;
    list-style-type:none;
    
    width:48%;
    height:11.5em;
    overflow-y:auto;
    
    margin:0 0.5em 0.5em 0;
    padding:0.5em;
    
    border:2px solid #888;
    border-radius:0.2em;
    
    background: #202940;
    color: white;
}

/* draggable items */
[data-draggable="item"]
{
    display:block;
    list-style-type:none;
    
    margin:0 0 2px 0;
    padding:0.2em 0.4em;
    
    border-radius:0.2em;
    
    line-height:1.3;
}
</style>

<div class="row">
    <div class="col-lg-12">
        <div class="card">
            <div class="card-header card-header-primary" style="padding: 9px 6px 0px 9px;">
            <div class="row">
                <div class="col">
                    <h4 class="card-title" style="padding-top: 6px;">View Contacts</h4>
                </div>
                <div class="col">
                    <form method="get" action="{% url 'contacts' 1 %}">
                        <div class="input-group" style="width:400px; margin-bottom:10px;">
                    
                        <input name="search" type="text" class="form-control" placeholder="Contact / Organisation Name" style="height: 41px !important">
                        <div class="input-group-append">
                            <button class="btn btn-sm btn-success" type="submit()" style="border-radius:3px;padding-left: 5px;padding-right: 9px;">
                                <i class="material-icons">search</i> <span style="font-size:12px;">Search</span>
                            </button>
                        </div>
                        </div>
                    </form>
                </div>
                 <!-- added by roshan -->
                <!-- filter -->
                <!-- filter Cutomer Type -->
                <div class="col-1" >
                    <form action="{% url 'contacts' 2 %}" method="get">
                        <div class="dropdown">
                        
                            <button class="btn btn-success dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown"data-display="static" aria-haspopup="true" aria-expanded="false" style="float: right;padding: 7px 14px 7px 14px;">
                                Filter
                            </button>
                            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
        
                            
                                <!-- filter CustomerType -->
                                <label class="form-check-label" style="margin-bottom: 3px;width: 100%;">
                                    <input class="form-check-input" type="checkbox" data-toggle="collapse" href="#Customer" name="customer_type_check" style="width: 111%;margin-left: -47%;">
                                    <span class="form-check-sign">
                                        <span class="check md" style="margin-left: 22px;color: black;">Customer Type</span>
                                    </span>
                                </label>
                                <hr style="margin-top: 0px;margin-bottom: -1px">
        
                                <div class="collapse" id="Customer" >
                                    <div>
										<label class="form-check-label" style="margin-bottom: 3px;width: 100%;">
                                            <input class="form-check-input" type="checkbox"  value="1" name="customer_type[]" style="width: 111%;margin-left: -38%;">
                                            <span class="form-check-sign">
                                                <span class="check" style="margin-left: 41px;color: black;">Customer</span>
                                            </span>
                                        </label>
										
                                        <label class="form-check-label" style="margin-bottom: 3px;width: 100%;">
                                            <input class="form-check-input" type="checkbox" value="2" name="customer_type[]" style="width: 111%;margin-left: -38%;">
                                            <span class="form-check-sign">
                                                <span class="check" style="margin-left: 41px;color: black;">Vendor</span>
                                            </span>
                                        </label>
                                       
                                        <label class="form-check-label" style="margin-bottom: 3px;width: 100%;">
                                            <input class="form-check-input" type="checkbox" value="3" name="customer_type[]" style="width: 111%;margin-left: -38%;">
                                            <span class="form-check-sign">
                                                <span class="check" style="margin-left: 41px;color: black;">Employee</span>
                                            </span>
                                        </label>
                                    </div>
                                </div>
                                <!-- filter OrganizationType -->
                                <hr style="margin-top: 0px;margin-bottom: -1px">

                                <label class="form-check-label" style="margin-bottom: 3px;width: 100%;">
                                    <input class="form-check-input" type="checkbox" data-toggle="collapse" href="#OrganizationType" role="button" aria-expanded="false" aria-controls="OrganizationType" name="organization_type_check" style="width: 111%;margin-left: -47%;">
                                    <span class="form-check-sign">
                                        <span class="check md" style="margin-left: 22px;color: black;">Organisation Type</span>
                                    </span>
                                </label>

                                <hr style="margin-top: 0px;margin-bottom: -1px">
        
                                <div class="collapse"  id="OrganizationType">
                                    <div>
                                        <label class="form-check-label" style="margin-bottom: 3px;width: 100%;">
                                            <input class="form-check-input" type="checkbox" value="1" name="org_type[]" style="width: 111%;margin-left: -38%;">
                                            <span class="form-check-sign">
                                                <span class="check" style="margin-left: 41px;color: black;">Individual</span>
                                            </span>
                                        </label>
                                        
                                        <label class="form-check-label" style="margin-bottom: 3px;width: 100%;">
                                            <input class="form-check-input" type="checkbox" value="2" name="org_type[]" style="width: 111%;margin-left: -38%;">
                                            <span class="form-check-sign">
                                                <span class="check" style="margin-left: 41px;color: black;">Proprietorship</span>
                                            </span>
                                        </label>

                                        <label class="form-check-label" style="margin-bottom: 3px;width: 100%;">
                                            <input class="form-check-input" type="checkbox" value="4" name="org_type[]" style="width: 111%;margin-left: -38%;">
                                            <span class="form-check-sign">
                                                <span class="check" style="margin-left: 41px;color: black;">Partnership</span>
                                            </span>
                                        </label>
        
                                        <label class="form-check-label" style="margin-bottom: 3px;width: 100%;">
                                            <input class="form-check-input" type="checkbox" value="5" name="org_type[]" style="width: 111%;margin-left: -38%;">
                                            <span class="form-check-sign">
                                                <span class="check" style="margin-left: 41px;color: black;">Trust</span>
                                            </span>
                                        </label>
                                        
                                        <label class="form-check-label" style="margin-bottom: 3px;width: 100%;">
                                            <input class="form-check-input" type="checkbox" value="6" name="org_type[]" style="width: 111%;margin-left: -38%;">
                                            <span class="form-check-sign">
                                                <span class="check" style="margin-left: 41px;color: black;">Gvt. Organisation</span>
                                            </span>
                                        </label>

                                    </div>
                                </div>
                                <!-- filter Active/Inactive  -->
                                <hr style="margin-top: 0px;margin-bottom: -1px">

                                <label class="form-check-label" style="margin-bottom: 3px;width: 100%;">
                                    <input class="form-check-input" type="checkbox" data-toggle="collapse" href="#status" role="button" aria-expanded="false" aria-controls="status" name="status_check" style="width: 111%;margin-left: -47%;">
                                    <span class="form-check-sign">
                                        <span class="check md" style="margin-left: 22px;color: black;">Status</span>
                                    </span>
                                </label>
                                
                                <hr style="margin-top: 0px;margin-bottom: -1px">
        
                                <div class="collapse" id="status">
                                    <div>
                                        <label class="form-check-label" style="margin-bottom: 3px;width: 100%;">
                                            <input class="form-check-input" type="checkbox" value="1" name="is_active[]" style="width: 111%;margin-left: -38%;">
                                            <span class="form-check-sign">
                                                <span class="check" style="margin-left: 41px;color: black;">Active</span>
                                            </span>
                                        </label>
        
                                        <label class="form-check-label" style="margin-bottom: 3px;width: 100%;">
                                            <input class="form-check-input" type="checkbox" value="0" name="is_active[]" style="width: 111%;margin-left: -38%;">
                                            <span class="form-check-sign">
                                                <span class="check" style="margin-left: 41px;color: black;">Inactive</span>
                                            </span>
                                        </label>
        
                                    </div>
                                </div> 
                                <hr style="margin-top: 0px;margin-bottom: -1px"> 
                            
                                <button type="submit" class="btn btn-success btn-xs" style="float: right;margin-right: 9px;padding: 3px 11px 2px 11px;">OK</button> 
                            </div>
                        
                        </div>
                        </form>
                </div>
                    <!-- End filter -->
                    <div class="col-1">
                        <span class="material-icons icons" data-toggle="modal" data-target="#CustomizeViewModel" style="margin-top: 13%;color: rgba(190, 186, 186, 0.781);">settings</span>
                    </div>
            </div>
                
            </div>
            <div class="card-body">
                <div class="loader" style="display: none;"></div>
                <div class="table" id="customize_table">
                    <table class=" table-bordered" width="100%" cellspacing="0">
                        <thead  style="background-color: #EEEEEE; color:#000000; font-size:11px">
                            <!-- <th class="text-center" style="color:#000000; font-size:11px;overflow: hidden;width: 5%">SL. No.</th> -->
                            <!-- <th class="text-center" style="color:#000000; font-size:11px;width: 11%">UID</th> -->
                            {% if customize.contact_name != 0 %}
                            <th class="text-center customize_name" style="color:#000000; font-size:11px;width: 13%">Contact Name</th>
                            {% endif %}
                            <!-- <th class="text-center" style="color:#000000; font-size:11px">User APP-ID</th> -->
                            <!-- <th class="text-center" style="color:#000000; font-size:11px">Customer Type</th> -->
                            <!-- <th class="text-center" style="color:#000000; font-size:11px">Is Sub Customer</th> -->
                            <!-- <th class="text-center" style="color:#000000; font-size:11px">Organisation Type</th> -->
                            {% if customize.contact_org_name != 0 %}
                            <th class="text-center customize_org" style="color:#000000; font-size:11px;width: 15%">Organisation Name</th>
                            {% endif %}
                            {% if customize.contact_email != 0 %}
                            <th class="text-center customize_mail" style="color:#000000; font-size:11px;width: 15%">Email</th>
                            {% endif %}
                            {% if customize.contact_phone != 0 %}
                            <th class="text-center customize_phone" style="color:#000000; font-size:11px;width: 10%">Phone</th>
                            {% endif %}
                            <!-- <th class="text-center" style="color:#000000; font-size:11px;width: 10%">location</th> -->
                            <th class="text-center" style="color:#000000; font-size:11px;width: 10%">Active</th>   
                            <th class="text-center" style="color:#000000; font-size:11px;width: 10%;">Action</th>                
                        </thead>
                        <tbody>
                            {% for contact in contacts %}
                                <tr id="t{{contact.id}}">
                                    <!-- <td>{{forloop.counter}}</td> -->
                                    <!-- <td>CT-0000{{contact.id}}</td> -->
                                    {% if customize.contact_name != 0 %}
                                    <td align="center" class="customize_name">
                                        <a class="contact_name" href="{% url 'edit-contact' contact.id %}" style="color: #8b92a9;text-decoration: underline;">
                                        {{contact.contact_name|default_if_none:""|upper |truncatechars:25}}
                                        </a>
                                    </td>
                                    {% endif %}
                                    <!-- <td>{{contact.app_id}}</td>
                                    <td>{{contact.get_customer_type_display|upper}}</td>
                                    <td>{{contact.get_is_sub_customer_display|upper}}</td> -->
                                    
                                    <!-- <td>{{contact.get_organization_type_display|upper}}</td> -->
                                    {% if customize.contact_org_name != 0 %}
                                    <td align="center" class="customize_org">{{contact.organization_name|default_if_none:""|upper | truncatechars:25}}</td>
                                    {% endif %}
                                    {% if customize.contact_email != 0 %}
                                    <td align="center" class="customize_mail">{{contact.email}}</td>
                                    {% endif %}
                                    {% if customize.contact_phone != 0 %}
                                    <td align="center" class="customize_phone">{{contact.phone}}</td>
                                    {% endif %}
                                    <!-- <td>{{contact.website}}</td>                         -->
                                    <td class="text-center" align="center">
                                        {% if contact.is_active %}
                                        <a title="Active" data-toggle="modal" data-target="#status{{contact.id}}" style="padding:5px 5px;">
                                            <i class="material-icons" id="{{contact.id}}" style="font-size: 275%;color:#0cb3f3;">toggle_on</i>
                                            <!-- <i class="material-icons" id="{{contact.id}}" style="font-size: 275%;color:#0cb3f3;">toggle_on</i> -->
                                        </a>
                                            
                                        {% else %}
                                        <a title="Inactive" data-toggle="modal" data-target="#status{{contact.id}}" style="padding:5px 5px;">
                                            <i class="material-icons" id="{{contact.id}}" style="font-size: 275%;color:white">toggle_off</i>
                                            <!-- <i class="material-icons" id="{{contact.id}}" style="font-size: 275%;color: white;">toggle_off</i>    -->
                                        </a>
                                            
                                        {% endif %}
                                    </td>
                                    <td class="text-center">
                                        <!-- Dropdown Add by Roshan -->

                                        <div class="dropdown">
                                            <button class="btn btn-primary dropdown-toggle btn-sm" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" >Action</button>

                                            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
                                                <a class="dropdown-item" title="Edit Contact" href="{% url 'edit-contact' contact.id %}" style="padding: 5px 5px;">Edit
                                                   <!--  <i class="material-icons">create</i> -->
                                                </a>
                                                {% if contact.is_active %}
                                                <a class="dropdown-item" title="Inactivate" data-toggle="modal" data-target="#status{{contact.id}}" style="padding:5px 5px;">
                                                    <p id="s{{contact.id}}" style="margin-bottom:0px;margin-right: 67px;">Make Inactive</p>   
                                                </a>
                                                    <!-- <button class="dropdown-item" title="Deactivate"  onclick="status({{contact.id}})" style="padding: 5px 5px;">
                                                        <p id="s{{contact.id}}" style="margin-bottom:0px;margin-right: 67px;">Make Deactive</p>
                                                          <i class="material-icons">clear</i> 
                                                    </button> -->
                                                {% else %}
                                                <a class="dropdown-item" title="activate" data-toggle="modal" data-target="#status{{contact.id}}" style="padding:5px 5px;">
                                                    <p id="s{{contact.id}}" style="margin-bottom:0px;margin-right: 67px;">Make Active</p>   
                                                </a>
                                                    <!-- <button class="dropdown-item" title="Activate Contact"  onclick="status({{contact.id}})" href="{% url 'contact-status-change' 'activate' contact.id %}" style="padding: 5px 5px;">
                                                        <p id="s{{contact.id}}" style="margin-bottom:0px;margin-right: 67px;">Make Active</p>
                                                        <i class="material-icons">check</i>
                                                    </button> -->
                                                {% endif %}
                                                <!-- Added by dipika -->
                                                <a class="dropdown-item" title="Delete Contact"  style="padding: 5px 5px;"data-toggle="modal" data-target="#del{{contact.id}}">Delete
                                                   <!--  <i class="material-icons">delete_forever</i> -->
                                                </a>



                                                 
                                            </div>  


                                            <div class="modal " tabindex="-1" role="dialog" id="del{{contact.id}}" style="border-top: none;left: 20%;top:200px;width: 500">
                                                <div class="modal-dialog" role="document" style="border-top: none;">
                                                    <div class="modal-content" style="border-top: none;background:white;position:bottom">
                                                        <div class="modal-header" style="border-bottom: none;padding:5px;">
                                                            
                                                        </div>
                                                        <div class="modal-body" style="border-top: none;position: bottom;">
                                                            <h4><b><font color="black">Are you sure you want to delete {{contact.contact_name |truncatechars:10 }}. Deleting contacts will not affect reports or historical transactions.</font></b></h4>
                                                        </div>
                                                        
                                                        <div class="modal-footer" style="justify-content: flex-start; border-top: none;padding:6px;margin-left: 29%">
                                                            <center><button onclick="remove({{contact.id}})" class="btn btn-success mr-2" style="align-content: left;">Yes</button></center>
                                                            <button id="{{contact.id}}" onclick="can({{contact.id}})" class="btn btn-warning">No</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                             <!-- DeactivePopup -->
                                        {% if contact.is_active %}
                                        <div class="modal " tabindex="-1" role="dialog" id="status{{contact.id}}" style="border-top: none;left: 20%;top:200px;width: 500">
                                            <div class="modal-dialog" role="document" style="border-top: none;">
                                                <div class="modal-content" style="border-top: none;background:white;position:bottom">
                                                    <div class="modal-header" style="border-bottom: none;padding:5px;">
                                                        
                                                    </div>
                                                    <div class="modal-body" style="border-top: none;position: bottom;">
                                                        <h4 ><b><center style="color: black;"id="text">Are you sure you want to make {{contact.contact_name |truncatechars:10}} inactive </center></b></h4>
                                                    </div>
                                                    
                                                    <div class="modal-footer" style="justify-content: flex-start; border-top: none;padding:6px;margin-left: 29%">
                                                        <center><button onclick="status({{contact.id}},'{{contact.display_name}}')" class="btn btn-success mr-2" style="align-content: left;">Yes</button>
                                                        <button id="{{product.id}}" onclick="nodeactive({{contact.id}})" class="btn btn-warning">No</button></center>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        {% else %}
                                         <!-- ActivePopUp -->
                                         <div class="modal " tabindex="-1" role="dialog" id="status{{contact.id}}" style="border-top: none;left: 20%;top:200px;width: 500">
                                            <div class="modal-dialog" role="document" style="border-top: none;">
                                                <div class="modal-content" style="border-top: none;background:white;position:bottom">
                                                    <div class="modal-header" style="border-bottom: none;padding:5px;">
                                                        
                                                    </div>
                                                    <div class="modal-body" style="border-top: none;position: bottom;">
                                                        <h4 ><b><center style="color: black;" id="text">Are you sure you want to make {{contact.contact_name |truncatechars:10}} active</center></b></h4>
                                                    </div>
                                                    
                                                    <div class="modal-footer" style="justify-content: flex-start; border-top: none;padding:6px;margin-left: 29%">
                                                        <center><button onclick="status({{contact.id}},'{{contact.display_name}}')" class="btn btn-success mr-2" style="align-content: left;">Yes</button>
                                                        <button id="{{contact.id}}" onclick="noactive({{contact.id}})" class="btn btn-warning">No</button></center>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        {% endif %}
                                        </div>    


                                    </td>   
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>   
                    {% if contacts %} 
                    <div class="pagination" style="float: right;">
                        <span class="step-links">
                            {% if contacts.has_previous %}
                                <a href="?page=1">&laquo; First</a>
                                <a href="?page={{ contacts.previous_page_number }}">Previous</a>
                            {% endif %}
                    
                            <span class="current">
                                Page {{ contacts.number }} of {{ contacts.paginator.num_pages }}.
                            </span>
                    
                            {% if contacts.has_next %}
                                <a href="?page={{ contacts.next_page_number }}">Next</a>
                                <a href="?page={{ contacts.paginator.num_pages }}">Last &raquo;</a>
                            {% endif %}
                        </span>
                    </div>
                    {% endif %} 
                </div>
            </div>
        </div>    
    </div>     
</div>
<!-- customize view -->
<div class="modal fade" id="CustomizeViewModel" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content" style="background-color:#202940">
            <form method="post" style="margin:0px" action="{% url 'edit_tax_details_form' %}">
                <div class="modal-header bg-warning">
                    <h5 class="modal-title" style="color:#000000; font-weight:bold;">Customize List</h5>
                    <!-- <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button> -->
                </div>
                <div class="modal-body">
                    {% csrf_token %}
                    <h5 style="color: white;text-align: center;margin-bottom: 1%;">Drag and drop be column name you want to show or hide</h5>
                    <ol data-draggable="target" id="first">
                        <h4 style="text-decoration: underline;">Show Column</h4>
                        {% if customize.contact_name != 0 %}
                        <li data-draggable="item" id="customize_contact_name">Contact Name</li>
                        {% endif %}
                        {% if customize.contact_org_name != 0 %}
                        <li data-draggable="item" id="customize_contact_org">Organisation name</li>
                        {% endif %}
                        {% if customize.contact_email != 0 %}
                        <li data-draggable="item" id="customize_contact_mail">Email</li>
                        {% endif %}
                        {% if customize.contact_phone != 0 %}
                        <li data-draggable="item" id="customize_contact_phone">Phone</li>
                        {% endif %}
                      </ol>
                      
                      <ol data-draggable="target" id="seconde">
                          <h4 style="text-decoration: underline;">Hide Column</h4>
                          {% if customize.contact_name == 0 %}
                          <li data-draggable="item" id="customize_contact_name">Contact Name</li>
                          {% endif %}
                          {% if customize.contact_org_name == 0 %}
                          <li data-draggable="item" id="customize_contact_org">Organisation name</li>
                          {% endif %}
                          {% if customize.contact_email == 0 %}
                          <li data-draggable="item" id="customize_contact_mail">Email</li>
                          {% endif %}
                          {% if customize.contact_phone == 0 %}
                          <li data-draggable="item" id="customize_contact_phone">Phone</li>
                          {% endif %}
                      </ol>
                      
                      
                </div>
                <div class="modal-footer">
                    <button class="btn btn-sm btn-success" type="button" onclick="customize_view(1)">apply</button>
                    <a class="btn btn-sm btn-danger" href="{% url 'contacts' 0 %}" type="reset">Cancel</a>
                    
                </div>
            </form>
        </div>
    </div>
</div>
<script>
    csrf_token = '{{csrf_token}}';
</script>